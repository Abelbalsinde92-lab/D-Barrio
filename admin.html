<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D'BARRIO ADMIN</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#F9A825">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700;900&display=swap" rel="stylesheet">
<style>
:root{--y:#F9A825;--bg:#000;--card:#111;--card2:#1a1a1a;--border:#2a2a2a;--text:#fff;--sub:#aaa;--red:#ff4444;--green:#00d856}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto Condensed',sans-serif;-webkit-tap-highlight-color:transparent}
body{background:var(--bg);color:var(--text);min-height:100vh;padding-bottom:80px}
.hdr{background:var(--card);border-bottom:3px solid var(--y);padding:14px 18px;position:sticky;top:0;z-index:100;display:flex;justify-content:space-between;align-items:center}
.hdr-logo{font-size:1.2rem;font-weight:900;color:var(--y);text-transform:uppercase}
.hdr-back{background:rgba(249,168,37,.15);border:2px solid var(--y);color:var(--y);padding:7px 14px;font-size:.75rem;font-weight:900;cursor:pointer;text-transform:uppercase;text-decoration:none}
.tabs{background:var(--card);border-bottom:3px solid var(--border);display:flex;position:sticky;top:55px;z-index:99}
.tab{padding:13px 0;font-size:.7rem;font-weight:900;text-transform:uppercase;color:var(--sub);border-bottom:3px solid transparent;cursor:pointer;flex:1;text-align:center;position:relative}
.tab.on{color:var(--y);border-bottom-color:var(--y)}
.tab .badge-count{position:absolute;top:6px;right:4px;background:var(--red);color:#fff;border-radius:50%;width:16px;height:16px;font-size:.55rem;display:flex;align-items:center;justify-content:center;font-weight:900}
.content{padding:18px;max-width:1200px;margin:0 auto}
.sec{display:none}.sec.on{display:block}
h2{color:var(--y);font-size:1.3rem;font-weight:900;text-transform:uppercase;border-bottom:3px solid var(--y);padding-bottom:8px;margin-bottom:18px}
.card{background:var(--card);border:3px solid var(--border);margin-bottom:12px;box-shadow:0 4px 0 #000}
.card.hl{border-color:var(--y);box-shadow:0 4px 0 #c17900}
.card-hdr{padding:15px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;gap:10px}
.card-title{font-weight:900;font-size:.95rem;text-transform:uppercase;color:#fff}
.card-sub{font-size:.7rem;color:var(--sub);margin-top:3px}
.card-body{padding:0 15px;max-height:0;overflow:hidden;transition:max-height .4s ease,padding .3s ease}
.card.open .card-body{padding:15px;max-height:5000px}
.arrow{color:var(--y);font-size:.9rem;transition:transform .3s}
.card.open .arrow{transform:rotate(180deg)}
.badge{padding:4px 10px;font-size:.62rem;font-weight:900;text-transform:uppercase}
.badge-r{background:var(--red);color:#fff;animation:pulse 2s infinite}
.badge-g{background:var(--green);color:#000}
.badge-o{background:#ff9500;color:#000}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.6}}
.fld{margin-bottom:12px}
.fld label{display:block;font-size:.62rem;font-weight:900;color:var(--sub);text-transform:uppercase;margin-bottom:5px}
.fld input,.fld select,.fld textarea{width:100%;background:#000;border:2px solid var(--border);color:#fff;padding:12px;font-family:'Roboto Condensed',sans-serif;font-size:.9rem;font-weight:700}
.fld input:focus,.fld select:focus,.fld textarea:focus{outline:none;border-color:var(--y)}
.btn{padding:12px 16px;border:none;font-family:'Roboto Condensed',sans-serif;font-weight:900;font-size:.85rem;cursor:pointer;text-transform:uppercase;display:block;width:100%;margin:5px 0}
.btn-y{background:var(--y);color:#000;box-shadow:0 4px 0 #c17900}
.btn-y:active{transform:translateY(4px);box-shadow:none}
.btn-g{background:transparent;border:2px solid var(--green);color:var(--green)}
.btn-r{background:rgba(255,68,68,.15);border:2px solid var(--red);color:var(--red)}
.btn-orange{background:#ff9500;color:#000;border:none}
.irow{display:flex;justify-content:space-between;padding:9px 0;border-bottom:1px solid var(--border);gap:10px}
.irow:last-child{border:none}
.ilbl{color:var(--sub);font-size:.78rem;font-weight:700}
.ival{color:#fff;font-weight:900;font-size:.85rem;text-align:right}
.money{color:var(--y);font-weight:900;font-size:1.05rem}
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%);background:var(--y);color:#000;padding:13px 22px;font-weight:900;font-size:.9rem;z-index:9999;min-width:240px;display:none}
.toast.err{background:var(--red);color:#fff}
.empty{color:var(--sub);text-align:center;padding:35px 20px;font-size:.9rem}
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.97);z-index:600;display:none;align-items:flex-start;justify-content:center;overflow-y:auto;padding:20px}
.modal-overlay.open{display:flex}
.modal-box{background:var(--card);border:3px solid var(--y);width:100%;max-width:440px;margin:auto}
.modal-top{background:var(--y);padding:14px 18px;display:flex;justify-content:space-between;align-items:center}
.modal-top h3{font-size:1.1rem;font-weight:900;color:#000;text-transform:uppercase}
.btn-close-modal{background:#000;border:none;color:var(--y);font-size:1.3rem;font-weight:900;cursor:pointer;padding:4px 12px}
.modal-body{padding:20px}
</style>
</head>
<body>

<div class="toast" id="toast"></div>

<div class="modal-overlay" id="modal-orden">
  <div class="modal-box">
    <div class="modal-top"><h3>ğŸ“ ORDEN MANUAL</h3><button class="btn-close-modal" onclick="closeOverlay('modal-orden')">âœ•</button></div>
    <div class="modal-body">
      <div class="fld"><label>Cliente</label><input type="text" id="o-nom"></div>
      <div class="fld"><label>WhatsApp</label><input type="tel" id="o-tel"></div>
      <div class="fld"><label>DirecciÃ³n</label><input type="text" id="o-dir"></div>
      <div class="fld"><label>Municipio</label><input type="text" id="o-mun"></div>
      <div class="fld"><label>Servicio</label>
        <select id="o-serv">
          <option value="">Seleccionar...</option>
          <option>ğŸš° PlomerÃ­a</option><option>âš¡ Electricidad</option><option>ğŸ”¨ CarpinterÃ­a</option><option>ğŸ§± AlbaÃ±ilerÃ­a</option><option>ğŸ¨ Pintura</option><option>â„ï¸ RefrigeraciÃ³n</option><option>ğŸ”‘ CerrajerÃ­a</option><option>ğŸ’» TecnologÃ­a</option><option>ğŸ”§ Otro</option>
        </select>
      </div>
      <div class="fld"><label>Detalles</label><textarea id="o-det" rows="3"></textarea></div>
      <button class="btn btn-y" onclick="crearOrdenManual()">ğŸ’¾ CREAR</button>
      <button class="btn btn-r" onclick="closeOverlay('modal-orden')">CANCELAR</button>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modal-edit-socio">
  <div class="modal-box">
    <div class="modal-top"><h3>âœï¸ EDITAR SOCIO</h3><button class="btn-close-modal" onclick="closeOverlay('modal-edit-socio')">âœ•</button></div>
    <div class="modal-body">
      <div class="fld"><label>Nombre</label><input type="text" id="e-nom"></div>
      <div class="fld"><label>WhatsApp</label><input type="tel" id="e-tel"></div>
      <div class="fld"><label>Zona</label><input type="text" id="e-zon"></div>
      <div class="fld"><label>Especialidad</label>
        <select id="e-esp">
          <option value="">Seleccionar...</option>
          <option>ğŸš° PlomerÃ­a</option><option>âš¡ Electricidad</option><option>ğŸ”¨ CarpinterÃ­a</option><option>ğŸ§± AlbaÃ±ilerÃ­a</option><option>ğŸ¨ Pintura</option><option>â„ï¸ RefrigeraciÃ³n</option><option>ğŸ”‘ CerrajerÃ­a</option><option>ğŸ’» TecnologÃ­a</option><option>ğŸ”§ Multiservicios</option>
        </select>
      </div>
      <div class="fld"><label>PIN</label><input type="password" id="e-pin" maxlength="4"></div>
      <div class="fld"><label>ComisiÃ³n (%)</label><input type="number" id="e-com" min="0" max="100"></div>
      <input type="hidden" id="e-socio-id">
      <button class="btn btn-y" onclick="guardarEdicionSocio()">ğŸ’¾ GUARDAR</button>
      <button class="btn btn-r" onclick="closeOverlay('modal-edit-socio')">CANCELAR</button>
    </div>
  </div>
</div>

<div class="hdr">
  <button class="hdr-back" onclick="logout()">â† SALIR</button>
  <div class="hdr-logo">D'BARRIO ADMIN</div>
  <div style="width:72px"></div>
</div>

<div class="tabs">
  <div class="tab on" id="tab-ordenes" onclick="showTab('ordenes')">ğŸ“‹ Ã“RDENES<span class="badge-count" id="cnt-ord" style="display:none">0</span></div>
  <div class="tab" id="tab-socios" onclick="showTab('socios')">ğŸ‘¥ SOCIOS</div>
  <div class="tab" id="tab-deudas" onclick="showTab('deudas')">ğŸ’° DEUDAS</div>
</div>

<div class="content">
  <div id="sec-ordenes" class="sec on">
    <h2>ğŸ“‹ Ã“rdenes</h2>
    <button class="btn btn-orange" style="margin-bottom:16px" onclick="openModal('modal-orden')">â• CREAR MANUAL</button>
    <div id="listaOrdenes"><p class="empty">Cargando...</p></div>
  </div>

  <div id="sec-socios" class="sec">
    <h2>ğŸ‘¥ Socios</h2>
    <div id="listaSocios"><p class="empty">Cargando...</p></div>
  </div>

  <div id="sec-deudas" class="sec">
    <h2>ğŸ’° Deudas</h2>
    <div id="listaDeudas"><p class="empty">Cargando...</p></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL='https://jtorpamexbjxnomngfwq.supabase.co';
const SUPABASE_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp0b3JwYW1leGJqeG5vbW5nZndxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0MjE2MjMsImV4cCI6MjA4Njk5NzYyM30.Tzun90wyUfPYb8K8WxmziwlKyJS8kY1K_zzrZNh7R-8';
const sb=supabase.createClient(SUPABASE_URL,SUPABASE_KEY);

if(!localStorage.getItem('db_admin'))window.location.href='index.html';

let sociosCache={};

function ct(t){return(t||'').replace(/[\s\-\(\)\+]/g,'')}
function money(n){return'$'+(parseFloat(n)||0).toFixed(2)}
function toast(msg,err=false){const t=document.getElementById('toast');t.textContent=msg;t.className='toast'+(err?' err':'');t.style.display='block';setTimeout(()=>t.style.display='none',3000)}
function toggleCard(id){const c=document.getElementById(id);if(!c)return;document.querySelectorAll('.card.open').forEach(x=>{if(x.id!==id)x.classList.remove('open')});c.classList.toggle('open')}
function closeOverlay(id){document.getElementById(id).classList.remove('open')}
function openModal(id){document.getElementById(id).classList.add('open')}

function showTab(id){
  document.querySelectorAll('.sec').forEach(s=>s.classList.remove('on'));
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));
  document.getElementById('sec-'+id).classList.add('on');
  document.getElementById('tab-'+id).classList.add('on');
  if(id==='ordenes')renderOrdenes();
  if(id==='socios')renderSocios();
  if(id==='deudas')renderDeudas()
}

async function initContadores(){
  const{data:sol}=await sb.from('solicitudes').select('*').eq('estado','pendiente');
  const n=sol?sol.length:0;
  document.getElementById('cnt-ord').textContent=n;
  document.getElementById('cnt-ord').style.display=n>0?'flex':'none';
  
  setInterval(async()=>{
    const{data:s2}=await sb.from('solicitudes').select('*').eq('estado','pendiente');
    const m=s2?s2.length:0;
    document.getElementById('cnt-ord').textContent=m;
    document.getElementById('cnt-ord').style.display=m>0?'flex':'none'
  },10000)
}

async function crearOrdenManual(){
  const nom=document.getElementById('o-nom').value.trim();
  const tel=document.getElementById('o-tel').value.trim();
  const dir=document.getElementById('o-dir').value.trim();
  const mun=document.getElementById('o-mun').value.trim();
  const serv=document.getElementById('o-serv').value;
  if(!nom||!tel||!dir||!serv){toast('âš ï¸ Completa campos',true);return}
  
  await sb.from('solicitudes').insert({
    cliente:nom,
    telefono:tel,
    direccion:dir,
    municipio:mun,
    servicio:serv,
    detalles:document.getElementById('o-det').value,
    estado:'pendiente'
  });
  
  toast('âœ… Orden creada');
  closeOverlay('modal-orden');
  document.getElementById('o-nom').value='';
  document.getElementById('o-tel').value='';
  document.getElementById('o-dir').value='';
  document.getElementById('o-mun').value='';
  document.getElementById('o-serv').value='';
  document.getElementById('o-det').value='';
  renderOrdenes()
}

// âœ… RENDERIZAR Ã“RDENES - CORREGIDO
async function renderOrdenes(){
  const c=document.getElementById('listaOrdenes');
  const{data:socios}=await sb.from('socios').select('*');
  sociosCache={};
  if(socios)socios.forEach(s=>sociosCache[s.id]=s);
  
  const{data:sol}=await sb.from('solicitudes').select('*').eq('estado','pendiente').order('created_at',{ascending:false});
  
  if(!sol||!sol.length){c.innerHTML='<p class="empty">Sin Ã³rdenes pendientes ğŸ‰</p>';return}
  
  c.innerHTML=sol.map(o=>{
    const tc=ct(o.telefono||'');
    const socioAsignado=o.socio_asignado&&sociosCache[o.socio_asignado]?(sociosCache[o.socio_asignado].nombre||'Socio'):null;
    const opcs=socios?socios.map(s=>`<option value="${s.id}" data-tel="${s.telefono||''}" data-nom="${s.nombre||''}" ${o.socio_asignado===s.id?'selected':''}>${s.nombre||'â€”'} â€” ${s.especialidad||'â€”'}</option>`).join(''):'';
    
    return`<div class="card hl" id="ord-${o.id}">
      <div class="card-hdr" onclick="toggleCard('ord-${o.id}')">
        <div>
          <div class="card-title">${o.cliente||'â€”'}</div>
          <div class="card-sub">${o.servicio||'â€”'} Â· ${o.municipio||'â€”'}</div>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          ${socioAsignado?`<span class="badge badge-o">ASIGNADO</span>`:`<span class="badge badge-r pulse">PEND</span>`}
          <span class="arrow">â–¼</span>
        </div>
      </div>
      <div class="card-body">
        <div class="irow"><span class="ilbl">DirecciÃ³n</span><span class="ival">${o.direccion||'â€”'}</span></div>
        <div class="irow"><span class="ilbl">Municipio</span><span class="ival">${o.municipio||'â€”'}</span></div>
        <div class="irow"><span class="ilbl">Servicio</span><span class="ival">${o.servicio||'â€”'}</span></div>
        <div class="irow"><span class="ilbl">Detalles</span><span class="ival">${o.detalles||'â€”'}</span></div>
        <div class="irow"><span class="ilbl">TelÃ©fono</span><span class="ival">${o.telefono||'â€”'}</span></div>
        ${socioAsignado?`<div class="irow"><span class="ilbl">Asignado a</span><span class="ival" style="color:var(--green)">âœ… ${socioAsignado}</span></div>`:''}
        <hr style="border:none;border-top:2px solid var(--border);margin:14px 0">
        <div class="fld"><label>Asignar Socio</label>
          <select id="sel-${o.id}">
            <option value="">â€” Seleccionar â€”</option>
            ${opcs}
          </select>
        </div>
        <button class="btn btn-y" onclick="asignarSocio('${o.id}','${(o.cliente||'').replace(/'/g,"\\'")}','${(o.servicio||'').replace(/'/g,"\\'")}','${(o.detalles||'').replace(/'/g,"\\'")}','${o.telefono||''}')">ğŸ“¤ ASIGNAR</button>
        <button class="btn btn-g" onclick="window.open('https://wa.me/${tc}','_blank')">ğŸ’¬ CONTACTAR</button>
        <button class="btn btn-g" onclick="completarOrden('${o.id}')">âœ… COMPLETAR</button>
        <button class="btn btn-r" onclick="eliminarOrden('${o.id}')">ğŸ—‘ï¸ ELIMINAR</button>
      </div>
    </div>`
  }).join('')
}

// âœ… ASIGNAR SOCIO - CORREGIDO
async function asignarSocio(oid,cliente,servicio,detalles,telCli){
  const sel=document.getElementById('sel-'+oid);
  if(!sel){toast('âš ï¸ Error',true);return}
  const sid=sel.value;
  if(!sid){toast('âš ï¸ Selecciona socio',true);return}
  const opt=sel.options[sel.selectedIndex];
  const telSoc=ct(opt.dataset.tel||'');
  const nomSoc=opt.dataset.nom||'Socio';
  
  // âœ… UPDATE CORRECTO: socio_asignado
  await sb.from('solicitudes').update({socio_asignado:sid}).eq('id',oid);
  
  const msgSoc=`ğŸ”§ NUEVA ORDEN D'BARRIO\n\nğŸ‘¤ ${cliente}\nğŸ“ ${telCli}\nğŸ·ï¸ ${servicio}\nâš™ï¸ ${detalles}\n\nâœ… Asignado a ti.`;
  window.open(`https://wa.me/${telSoc}?text=${encodeURIComponent(msgSoc)}`,'_blank');
  
  toast(`âœ… Asignado a ${nomSoc}`);
  renderOrdenes()
}

async function completarOrden(id){
  if(!confirm('Â¿Marcar como completada?'))return;
  await sb.from('solicitudes').update({estado:'completada'}).eq('id',id);
  toast('âœ… Completada');
  renderOrdenes()
}

async function eliminarOrden(id){
  if(!confirm('Â¿Eliminar orden?'))return;
  await sb.from('solicitudes').delete().eq('id',id);
  toast('ğŸ—‘ï¸ Eliminada');
  renderOrdenes()
}

async function renderSocios(){
  const c=document.getElementById('listaSocios');
  const{data:soc}=await sb.from('socios').select('*');
  if(!soc||!soc.length){c.innerHTML='<p class="empty">Sin socios registrados</p>';return}
  
  c.innerHTML=soc.map(s=>{
    const tc=ct(s.telefono||'');
    return`<div class="card" id="soc-${s.id}">
      <div class="card-hdr" onclick="toggleCard('soc-${s.id}')">
        <div>
          <div class="card-title">${s.nombre||'â€”'}</div>
          <div class="card-sub">${s.especialidad||'â€”'} Â· ${s.zona||'â€”'}</div>
        </div>
        <span class="arrow">â–¼</span>
      </div>
      <div class="card-body">
        <div class="irow"><span class="ilbl">TelÃ©fono</span><span class="ival">${s.telefono||'â€”'}</span></div>
        <div class="irow"><span class="ilbl">PIN</span><span class="ival">${s.pin||'â€”'}</span></div>
        <div class="irow"><span class="ilbl">ComisiÃ³n</span><span class="ival">${s.comision||15}%</span></div>
        <div class="irow"><span class="ilbl">Deuda</span><span class="money">${money(s.deuda)}</span></div>
        <button class="btn btn-orange" onclick="abrirEditarSocio('${s.id}','${(s.nombre||'').replace(/'/g,"\\'")}','${(s.telefono||'').replace(/'/g,"\\'")}','${(s.zona||'').replace(/'/g,"\\'")}','${(s.especialidad||'').replace(/'/g,"\\'")}','${s.pin||''}',${s.comision||15})">âœï¸ EDITAR</button>
        <button class="btn btn-g" onclick="window.open('https://wa.me/${tc}','_blank')">ğŸ’¬ WhatsApp</button>
        <button class="btn btn-r" onclick="eliminarSocio('${s.id}')">ğŸ—‘ï¸ ELIMINAR</button>
      </div>
    </div>`
  }).join('')
}

function abrirEditarSocio(id,nom,tel,zon,esp,pin,com){
  document.getElementById('e-socio-id').value=id;
  document.getElementById('e-nom').value=nom;
  document.getElementById('e-tel').value=tel;
  document.getElementById('e-zon').value=zon;
  document.getElementById('e-esp').value=esp;
  document.getElementById('e-pin').value=pin;
  document.getElementById('e-com').value=com;
  openModal('modal-edit-socio')
}

async function guardarEdicionSocio(){
  const id=document.getElementById('e-socio-id').value;
  const nom=document.getElementById('e-nom').value.trim();
  const tel=document.getElementById('e-tel').value.trim();
  const zon=document.getElementById('e-zon').value.trim();
  const esp=document.getElementById('e-esp').value;
  const pin=document.getElementById('e-pin').value.trim();
  const com=parseInt(document.getElementById('e-com').value)||15;
  if(!nom||!tel||!esp||!pin){toast('âš ï¸ Completa campos',true);return}
  
  await sb.from('socios').update({
    nombre:nom,
    telefono:tel,
    zona:zon,
    especialidad:esp,
    pin:pin,
    comision:com
  }).eq('id',id);
  
  closeOverlay('modal-edit-socio');
  toast('âœ… Socio actualizado');
  renderSocios()
}

async function eliminarSocio(id){
  if(!confirm('Â¿Eliminar socio?'))return;
  await sb.from('socios').delete().eq('id',id);
  toast('ğŸ—‘ï¸ Eliminado');
  renderSocios()
}

async function renderDeudas(){
  const c=document.getElementById('listaDeudas');
  const{data:soc}=await sb.from('socios').select('*');
  if(!soc||!soc.length){c.innerHTML='<p class="empty">Sin socios</p>';return}
  
  c.innerHTML=soc.map(s=>{
    const tc=ct(s.telefono||'');
    return`<div class="card" id="deu-${s.id}">
      <div class="card-hdr" onclick="toggleCard('deu-${s.id}')">
        <div>
          <div class="card-title">${s.nombre||'â€”'}</div>
          <div class="card-sub">${s.especialidad||'â€”'}</div>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <span class="badge badge-y">${money(s.deuda)}</span>
          <span class="arrow">â–¼</span>
        </div>
      </div>
      <div class="card-body">
        <div class="irow"><span class="ilbl">Zona</span><span class="ival">${s.zona||'â€”'}</span></div>
        <div class="irow"><span class="ilbl">ComisiÃ³n</span><span class="ival">${s.comision||15}%</span></div>
        <div class="irow"><span class="ilbl">Deuda</span><span class="money">${money(s.deuda)}</span></div>
        <button class="btn btn-y" onclick="liquidar('${s.id}','${s.nombre||''}','${tc}',${s.deuda||0})">ğŸ’° LIQUIDAR</button>
        <button class="btn btn-g" onclick="window.open('https://wa.me/${tc}','_blank')">ğŸ’¬ WhatsApp</button>
      </div>
    </div>`
  }).join('')
}

async function liquidar(sid,nom,tel,deuda){
  if(!confirm('Â¿Marcar como liquidado?'))return;
  await sb.from('socios').update({deuda:0}).eq('id',sid);
  
  const msg=`ğŸ’° LIQUIDACIÃ“N D'BARRIO\n\nHola ${nom},\n\nTu deuda de ${money(deuda)} ha sido liquidada.\n\nâœ… Cuenta saldada`;
  window.open(`https://wa.me/${tel}?text=${encodeURIComponent(msg)}`,'_blank');
  
  toast('âœ… Liquidado');
  renderDeudas()
}

function logout(){localStorage.removeItem('db_admin');window.location.href='index.html'}

initContadores();
renderOrdenes();

if('serviceWorker' in navigator)navigator.serviceWorker.register('sw.js').catch(()=>{});
</script>
</body>
</html>